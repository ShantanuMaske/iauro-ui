<div class="container-fluid">
  <h1 class="heading-text text-center">Student Data Logs</h1>
  <div class="row">
    <div class="col-md-4">
      <form
        [formGroup]="studentForm"
        #formDirective="ngForm"
        (ngSubmit)="onSubmit(formDirective)"
      >
        <mat-accordion>
          <mat-expansion-panel expanded="true">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h2 class="m-1">Personal information</h2>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="row">
              <div class="col col-md-12 col-sm-12">
                <mat-form-field
                  [floatLabel]="'always'"
                  appearance="outline"
                  class="w-100 mat-focused mat-form-field-should-placeholder mat-form-field-should-float mat-form-field-show-focus"
                >
                  <mat-label>First Name</mat-label>
                  <input
                    formControlName="firstName"
                    matInput
                    placeholder="Enter First Name"
                  />
                </mat-form-field>
              </div>
              <div class="col col-md-12 col-sm-12">
                <mat-form-field
                  [floatLabel]="'always'"
                  appearance="outline"
                  class="w-100 mat-focused mat-form-field-should-placeholder mat-form-field-should-float mat-form-field-show-focus"
                >
                  <mat-label>Last Name</mat-label>
                  <input
                    formControlName="lastName"
                    matInput
                    placeholder="Enter Last Name"
                  />
                </mat-form-field>
              </div>
              <div class="col col-md-12 col-sm-12">
                <mat-form-field
                  [floatLabel]="'always'"
                  appearance="outline"
                  class="w-100 mat-focused mat-form-field-should-placeholder mat-form-field-should-float mat-form-field-show-focus"
                >
                  <mat-label>Email ID</mat-label>
                  <input
                    formControlName="email"
                    matInput
                    placeholder="Enter Email"
                  />
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col col-md-12 col-sm-12">
                <mat-form-field
                  [floatLabel]="'always'"
                  appearance="outline"
                  class="w-100 mat-focused mat-form-field-should-placeholder mat-form-field-should-float mat-form-field-show-focus"
                >
                  <mat-label>Mobile Number</mat-label>
                  <input
                    formControlName="mobileNumber"
                    matInput
                    placeholder="Enter Mobile Number"
                  />
                </mat-form-field>
              </div>
              <div class="col col-md-12 col-sm-12">
                <mat-form-field
                  [floatLabel]="'always'"
                  appearance="outline"
                  class="w-100 mat-focused mat-form-field-should-placeholder mat-form-field-should-float mat-form-field-show-focus"
                >
                  <mat-label>Department</mat-label>
                  <mat-select
                    formControlName="departmentName"
                    placeholder="Please Select Department"
                  >
                    <mat-option
                      *ngFor="let department of departments"
                      [value]="department.value"
                    >
                      {{ department.value }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col col-md-12 col-sm-12">
                <mat-label>Gender</mat-label>
                <mat-radio-group
                  formControlName="gender"
                  name="radioButtonsTransport"
                >
                  <mat-radio-button id="radio_01" value="Male"
                    >Male</mat-radio-button
                  >
                  &nbsp;
                  <mat-radio-button id="radio_02" value="Female"
                    >Female</mat-radio-button
                  >
                </mat-radio-group>
              </div>
            </div>
            <button
              mat-raised-button
              color="primary"
              type="submit"
              class="btn btn-primary mt-2"
            >
              Submit
            </button>
            &nbsp;
            <button
              mat-raised-button
              color="warn"
              type="button"
              (click)="resetForm()"
              class="btn btn-primary mt-2"
            >
              Reset
            </button>
          </mat-expansion-panel>
        </mat-accordion>
      </form>
    </div>
    <div class="col-md-8">
      <div class="mat-elevation-z8">
        <table mat-table [dataSource]="dataSource" matSort>
          <ng-container matColumnDef="firstName">
            <th mat-header-cell *matHeaderCellDef>First Name</th>
            <td mat-cell *matCellDef="let element">{{ element.firstName }}</td>
          </ng-container>

          <ng-container matColumnDef="lastName">
            <th mat-header-cell *matHeaderCellDef>Last Name</th>
            <td mat-cell *matCellDef="let element">{{ element.lastName }}</td>
          </ng-container>

          <ng-container matColumnDef="departmentName">
            <th mat-header-cell *matHeaderCellDef>Department</th>
            <td mat-cell *matCellDef="let element">
              {{ element.departmentName }}
            </td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef>Email</th>
            <td mat-cell *matCellDef="let element">
              {{ element.email }}
            </td>
          </ng-container>

          <ng-container matColumnDef="mobileNumber">
            <th mat-header-cell *matHeaderCellDef>Mobile Number</th>
            <td mat-cell *matCellDef="let element">
              {{ element.mobileNumber }}
            </td>
          </ng-container>

          <ng-container matColumnDef="gender">
            <th mat-header-cell *matHeaderCellDef>Gender</th>
            <td mat-cell *matCellDef="let element">{{ element.gender }}</td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>Action</th>
            <td mat-cell *matCellDef="let row" class="text-left">
              <button
                (click)="editStudent(row?.id)"
                class="btn btn-secondary mt-2"
              >
                Edit
              </button>
              <br />
              <button
                (click)="deleteStudent(row?.id)"
                class="btn btn-danger mt-2 mb-2"
              >
                Delete
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <p class="text-center p-2" *ngIf="!studentData?.length">
          <strong> No Data Found!!</strong>
        </p>
      </div>
    </div>
  </div>
</div>
